"use strict";const e=require("../../common/vendor.js"),i=require("../../uni_modules/uni-upgrade-center-app/utils/call-check-version.js"),n=require("../../uni_modules/uni-id-pages/common/store.js"),o=e.Zs.database(),t={data(){return{gridList:[{text:"评论",icon:"chat"},{text:"已发布",to:"/pages/ucenter/UpLoaded/UpLoaded",icon:"cloud-upload"},{text:"个人资料",to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",icon:"contact"}],ucenterList:[[{title:"签到",event:"signIn",icon:"compose"},{title:this.$t("mine.myScore"),to:"",event:"getScore",icon:"paperplane"}],[{title:this.$t("mine.feedback"),to:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback",icon:"help"},{title:this.$t("mine.settings"),to:"/pages/ucenter/settings/settings",icon:"gear"}]],listStyles:{height:"150rpx",width:"150rpx",border:{color:"#eee",width:"1px",style:"solid",radius:"100%"}}}},onLoad(){},onShow(){},computed:{userInfo:()=>n.store.userInfo,hasLogin:()=>n.store.hasLogin,appConfig:()=>getApp().globalData.config},methods:{toSettings(){e.index.navigateTo({url:"/pages/ucenter/settings/settings"})},signIn(){this.$refs.signIn.open()},signInByAd(){this.$refs.signIn.showRewardedVideoAd()},ucenterListClick(e){!e.to&&e.event&&this[e.event]()},async checkVersion(){let n=await i.callCheckVersion();console.log(n),n.result.code>0||e.index.showToast({title:n.result.message,icon:"none"})},toUserInfo(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},tapGrid(i){n.store.hasLogin?(1===i?e.index.navigateTo({url:"/pages/ucenter/UpLoaded/UpLoaded"}):0===i?e.index.navigateTo({url:"/pages/ucenter/historicComments/historicComments"}):2==i&&e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"}),console.log("未知的索引值")):e.index.showModal({title:"提示",content:"您尚未登录，请登录后查看",success:i=>{i.confirm?e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"}):i.cancel}})},gotoMarket(){},getScore(){if(!this.userInfo)return e.index.showToast({title:this.$t("mine.checkScore"),icon:"none"});e.index.showLoading({mask:!0}),o.collection("uni-id-scores").where('"user_id" == $env.uid').field("score,balance").orderBy("create_date","desc").limit(1).get().then((i=>{console.log(i);const n=i.result.data[0];let o="";o=n?this.$t("mine.currentScore")+n.balance:this.$t("mine.noScore"),e.index.showToast({title:o,icon:"none"})})).finally((()=>{e.index.hideLoading()}))},async share(){let{result:i}=await o.collection("uni-id-users").where("'_id' == $cloudEnv_uid").field("my_invite_code").get(),n=i.data[0].my_invite_code;if(!n)return e.index.showToast({title:"请检查uni-config-center中uni-id配置，是否已启用 autoSetInviteCode",icon:"none"});console.log({myInviteCode:n}),this.appConfig.about}}};if(!Array){(e.resolveComponent("uni-sign-in")+e.resolveComponent("cloud-image")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-grid-item")+e.resolveComponent("uni-grid")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list"))()}Math||((()=>"../../uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.js")+(()=>"../../uni_modules/uni-id-pages/components/cloud-image/cloud-image.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid-item/uni-grid-item.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid/uni-grid.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js"))();const s=e._export_sfc(t,[["render",function(i,n,o,t,s,r){return e.e({a:e.sr("signIn","471237e5-0"),b:r.hasLogin&&r.userInfo.avatar_file&&r.userInfo.avatar_file.url},r.hasLogin&&r.userInfo.avatar_file&&r.userInfo.avatar_file.url?{c:e.p({width:"150rpx",height:"150rpx",src:r.userInfo.avatar_file.url})}:{d:e.p({color:"#ffffff",size:"50",type:"person-filled"})},{e:r.hasLogin},r.hasLogin?{f:e.t(r.userInfo.nickname||r.userInfo.username||r.userInfo.mobile)}:{g:e.t(i.$t("mine.notLogged"))},{h:e.o(((...e)=>r.toUserInfo&&r.toUserInfo(...e))),i:e.f(s.gridList,((i,n,o)=>({a:e.o((e=>r.tapGrid(n))),b:"471237e5-5-"+o+",471237e5-4-"+o,c:e.p({color:"#007AFF",type:i.icon,size:"50"}),d:e.t(i.text),e:"471237e5-4-"+o+",471237e5-3"}))),j:e.p({column:3,showBorder:!1,square:!0}),k:e.f(s.ucenterList,((i,n,o)=>({a:e.f(i,((i,n,t)=>({a:n,b:e.o((e=>r.ucenterListClick(i)),n),c:"471237e5-7-"+o+"-"+t+",471237e5-6-"+o,d:e.p({title:i.title,link:!0,rightText:i.rightText,clickable:!0,to:i.to,"show-extra-icon":!0,extraIcon:{type:i.icon,color:"#999"}})}))),b:n,c:"471237e5-6-"+o})))})}],["__scopeId","data-v-471237e5"]]);wx.createPage(s);
