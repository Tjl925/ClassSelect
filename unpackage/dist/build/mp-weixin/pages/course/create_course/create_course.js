"use strict";const e=require("../../../common/vendor.js"),o=require("../../../uni_modules/uni-id-pages/common/store.js"),r=require("../../../common/assets.js");e.Zs.importObject("uni-id-co");const s=e.Zs.database(),t={data:()=>({course:{course_name:"",course_location:"",teacher_name:"",course_number:"",college:"",credit:"",average_rating:0,status:1}}),computed:{userInfo:()=>o.store.userInfo},onLoad(){e.index.setNavigationBarTitle({title:"上传课程信息"})},methods:{navBack(){e.index.navigateBack()},async submitCourseInfo(){try{e.index.showLoading({title:"提交中...",mask:!0});const o={creator_id:this.userInfo._id,created_at:(new Date).toISOString(),course_name:this.course.course_name,course_location:this.course.course_location,teacher_name:this.course.teacher_name,course_number:this.course.course_number,credit:this.course.credit,college:this.course.college,average_rating:this.course.average_rating,status:1};if(!(await s.collection("course-info").add(o)).result.id)throw new Error("创建成功");e.index.showToast({title:"创建成功",icon:"success"}),this.course={course_name:"",course_location:"",teacher_name:"",course_number:"",average_rating:0},setTimeout((()=>{e.index.navigateBack()}),2e3)}catch(o){console.error("提交课程信息失败:",o),e.index.showToast({title:o.message||"提交失败",icon:"none"})}finally{e.index.hideLoading(),setTimeout((()=>{e.index.switchTab({url:"/pages/course/course"})}),2500)}}}};const c=e._export_sfc(t,[["render",function(o,s,t,c,a,i){return{a:r._imports_0$2,b:a.course.course_name,c:e.o((e=>a.course.course_name=e.detail.value)),d:r._imports_0,e:a.course.teacher_name,f:e.o((e=>a.course.teacher_name=e.detail.value)),g:r._imports_2$2,h:a.course.credit,i:e.o((e=>a.course.credit=e.detail.value)),j:r._imports_3$1,k:a.course.college,l:e.o((e=>a.course.college=e.detail.value)),m:r._imports_4,n:e.t(a.course.course_location||"请选择开课校区"),o:["江安","望江","华西"],p:e.o((e=>a.course.course_location=["江安","望江","华西"][e.detail.value])),q:r._imports_5,r:a.course.course_number,s:e.o((e=>a.course.course_number=e.detail.value)),t:e.o((e=>i.navBack())),v:e.o(((...e)=>i.submitCourseInfo&&i.submitCourseInfo(...e)))}}],["__scopeId","data-v-ae0628e6"]]);wx.createPage(c);
